<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="css/public.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/iconfont.css" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" href="css/shopCar.css">
</head>

<body>

    <!--提示栏-->
    <div class="tipsBox">
        <div class="tips">
            任何情况下，贝贝不会以任何理由主动联系用户索要密码、验证码或银行卡号，或是要求点击任何网址链接扫描二维码进行退款或支付操作。请提高警惕，谨防受骗！
        </div>
    </div>
    <!--登入提示-->
    <div class="loginBox">
        <div class="dlogin">
            <ul class="login">
                <li>您好，</li>
                <li>
                    <a href="#" class="aLogin">请登入</a>
                </li>
                <li>
                    <a href="#">免费注册</a>
                </li>
                <li>|</li>
                <li>
                    <a href="#">商家入驻</a>
                </li>
                <li>|</li>
                <li>贝贝商家中心<span class="iconfont icon-xiala-"></span>
                    <ul id="businessCenter">
                        <li>贝贝商家中心<span class="iconfont icon-xiala-"></span></li>
                        <li>贝店商家中心</li>
                        <li>友团商家中心</li>
                        <li>贝仓商家中心</li>
                        <li>供应商中心</li>
                    </ul>
                </li>
                <li>|</li>
                <li style="position: relative;">帮助中心<span class="iconfont icon-xiala-"></span>
                    <ul id="helpCenter" style="position: absolute">
                        <li>帮助中心
                        </li>
                        <li>联系客服</li>
                    </ul>
                </li>
                <li>|</li>
                <li style="position: relative;">关注<span class="iconfont icon-xiala-"></span>
                    <div id="concernTop">
                        关注<span class="iconfont icon-xiala-"></span>
                    </div>
                    <div id="concernBottom">
                        <img src="img/1.png" />
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <!--购物车-->
    <div class="box" style="overflow: visible;">
        <div class="contentBox" style="position: relative;overflow: visible;">
            <div class="shopingRight">
                <div class="promise">
                    <a href="#"><img src="img/2220.png" /></a>
                </div>
                <img src="img/832.png" class="img832" />
                <div class="shopingCar">
                    我的购物车
                    <div class="shopingCarBox">
                        <div class="myGoods">

                        </div>
                        <div class="pay">
                            <span>小计</span>
                            <b>￥0.00</b>
                            <input type="button" value="去购物车结算">
                        </div>
                    </div>
                </div>
            </div>
            <a href="#" class="logo">
                <img src="img/2202.jpg" />
            </a>
        </div>
    </div>

    <!-- //我的购物车 -->
    <div class="box">
        <div class="contentBox contentBox1">
            <div class="myShopCar">
                <h1>我的购物车</h1>
                <div class="goodsTitle">
                    <div class="allCheck">
                        <input type="checkbox" class="checkboxLeader" checked="checked">
                        <span>全选</span>
                    </div>
                    <div class="goodsName">
                        商品
                    </div>
                    <div class="goodsInformation">
                        商品信息
                    </div>
                    <div class="goodsPrice">
                        单价（元）
                    </div>
                    <div class="goodsCount">
                        数量
                    </div>
                    <div class="subTotal">
                        小计
                    </div>
                    <div class="operate">
                        操作
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- 具体商品 -->
    <div class="box box1">
        <div class="contentBox contentBox1">
            <table class="cars" rules="rows">
                <tr>
                    <td class="carsTitle" colspan="7">
                        <input type="checkbox">
                        <span>其他</span>
                    </td>
                </tr>
                <tr>
                    <td class="carsCheckBox">
                        <input type="checkbox" class="checkboxUnder" checked="checked">
                    </td>
                    <td class="carsName">
                        <div class="carsNameLeft">
                            <img src="http://b1.hucdn.com/upload/item/1906/24/33223140370000_800x800.jpg!60x60.jpg"
                                alt="">
                        </div>
                        <div class="carsNameRight">
                            <p>格格童鞋儿童帆布鞋
                                童鞋儿童帆布鞋格格童鞋儿
                            </p>
                        </div>
                    </td>
                    <td class="carsInformation">
                        黑色，22码
                    </td>
                    <td class="carsPrice">
                        29.90
                    </td>
                    <td class="carsCount">
                        <div>
                            <b class="carsCountAdd"></b>
                            <span>1</span>
                            <b class="carsCountSub"></b>
                        </div>
                    </td>
                    <td class="carsSubTotal">
                        29.90
                    </td>
                    <td class="carsOpera">
                        <span>删除</span>
                    </td>
                </tr>
                <tr class="carsFooter">
                    <td colspan="5"></td>
                    <td>小计</td>
                    <td>29.90</td>
                </tr>
            </table>
        </div>
    </div>
    <!-- 结账 -->
    <div class="box" style="position: absolute ;left: 0;">
        <div class="contentBox contentBox1">
            <div class="checkOut">
                <div class="checkOutLeft">
                    <input type="checkbox" class="checkAll checkboxLeader" checked="checked">
                    <span>全选</span>
                    <span>删除</span>
                </div>
                <div class="checkOutRight">
                    <p>
                        共计<span class="goodsAllCount">5</span>件商品
                        已优惠<span>0.00</span>元，总计（不含运费）<span class="totalPrice">
                            ￥ 0.00
                        </span>
                        <input type="button" value="确认订单">
                    </p>
                </div>
            </div>
        </div>
    </div>
    <!-- 占位的box-->
    <div class="box">
        <div class="placeHolderBox"></div>
    </div>
    <!-- 网页底部 -->
    <div class="box bottomNav">
        <div class="contentBox ">
            <ul class="bottomNavList">
                <li>首页</li>
                <li>关于贝贝</li>
                <li>商家入驻</li>
                <li>正品保证</li>
                <li>人才招聘</li>
                <li>联系我们</li>
                <li>帮助中心</li>
                <li>友情链接</li>
                <li>手机客户端</li>
                <li>客服在线</li>
                <li>贝贝公益</li>
                <li>品质健康</li>
                <li style="border-right:none ">育儿社区</li>
            </ul>
        </div>
    </div>

    <!-- 网页底部 -->
    <div class="box">
        <div class="contentBox footer">
            <p>浙ICP备14025287号 | 食品流通许可证：SP3301041510054925 | 出版物经营许可证：新出发零字第00086号 | 知识产权 | 浙公网安备 33010402000616号</p>
            <h4>© 2014-2019 杭州贝购科技有限公司 All Rights Reserved. 客服热线：0571-10107788</h4>
        </div>
    </div>

</body>

</html>
<script src="js/jquery-1.8.3.js"></script>
<script>
    window.onload = function () {
        $.get('shoppingCar.php', {}, test, 'text')

        function test(data) {
            data = JSON.parse(data)
            for (let i = 0; i < data.length; i++) {
                let str = `
                <table class="cars" rules="rows">
                <tr>
                    <td class="carsTitle" colspan="7">
                        <input type="checkbox">
                        <span>其他</span>
                    </td>
                </tr>
                <tr>
                    <td class="carsCheckBox">
                        <input type="checkbox" class="checkboxUnder" checked="checked">
                    </td>
                    <td class="carsName">
                        <div class="carsNameLeft">
                            <img src="${data[i].img}"
                                alt="">
                        </div>
                        <div class="carsNameRight">
                            <p>
                                ${data[i].imgd}
                            </p>
                        </div>
                    </td>
                    <td class="carsInformation">
                        ${data[i].information}
                    </td>
                    <td class="carsPrice">
                        ${data[i].price}
                    </td>
                    <td class="carsCount">
                        <div>
                            <b class="carsCountAdd"></b>
                            <span>${data[i].count}</span>
                            <b class="carsCountSub"></b>
                        </div>
                    </td>
                    <td class="carsSubTotal">
                        ${data[i].price*data[i].count}
                    </td>
                    <td class="carsOpera">
                        <span>删除</span>
                    </td>
                </tr>
                <tr class="carsFooter">
                    <td colspan="5"></td>
                    <td>小计</td>
                    <td>29.90</td>
                </tr>
            </table>
                `
                $(".contentBox1").eq(0).append(str)
            }
            //调整结账时的位置
            pCheckOut()
            checkChange(data)
        }

        //调整结账时的位置
        function pCheckOut() {
            let windowHeight = document.documentElement.clientHeight || document.body.clientHeight;
            let top1 = windowHeight - $('.box').eq(3).height();
            $('.box').eq(3).css('top', top1)
            window.onscroll = function () {
                let top2 = document.documentElement.scrollTop || document.body.scrollTop;
                top3 = top1 + top2;
                finalTop = $('.tipsBox').height() + $('.loginBox').height() + $('.box').eq(0).height() + $(
                    '.box').eq(1).height() + $('.box').eq(2).height()
                if (top3 >= finalTop + 50) {
                    top3 = finalTop + 50;
                }
                $('.box').eq(3).css('top', top3)
            }
        }
        //全选时自动全选
        function checkChange() {
            $('.checkboxUnder').click(function () {
                for (let i = 0; i < $('.checkboxUnder').length; i++) {
                    if (!$('.checkboxUnder')[i].checked) {
                        $('.checkboxLeader').eq(0).attr('checked', false);
                        $('.checkboxLeader').eq(1).attr('checked', false);
                        return;
                    } else {
                        $('.checkboxLeader').eq(0).attr('checked', true);
                        $('.checkboxLeader').eq(1).attr('checked', true);
                    }
                }
            })

            $('.checkboxLeader').click(function () {
                for (let i = 0; i < $('.checkboxUnder').length; i++) {
                    $('.checkboxUnder').eq(i).attr('checked', true);
                    $('.checkboxLeader').eq(0).attr('checked', true);
                    $('.checkboxLeader').eq(1).attr('checked', true);
                }
            })
        }

    }
</script>